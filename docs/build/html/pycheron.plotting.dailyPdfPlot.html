<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pycheron.plotting.dailyPdfPlot &#8212; Pycheron 2.1.0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/horse-128.png"></span>
          Pycheron</a>
        <span class="navbar-text navbar-version pull-left"><b>2.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="install.html">Install</a></li>
                <li><a href="pycheron.html">Documentation</a></li>
                <li><a href="https://gitlab.sandia.gov/lynm/pycheron">Gitlab</a></li>
                <li><a href="tutorials">Tutorials</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Documentation <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">pycheron.plotting.dailyPdfPlot</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="module-pycheron.plotting.dailyPdfPlot">
<span id="pycheron-plotting-dailypdfplot"></span><h1>pycheron.plotting.dailyPdfPlot<a class="headerlink" href="#module-pycheron.plotting.dailyPdfPlot" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="pycheron.plotting.dailyPdfPlot.dailyPdfplots">
<code class="descname">dailyPdfplots</code><span class="sig-paren">(</span><em>st</em>, <em>model='nlnm'</em>, <em>f_name_grid=None</em>, <em>f_name_line=None</em>, <em>per_arr=None</em>, <em>net_dict=None</em>, <em>diff_threshold=50</em>, <em>micro_threshold=10</em>, <em>banded_threshold=5</em>, <em>station=None</em>, <em>network=None</em>, <em>channel=None</em>, <em>session=None</em>, <em>location=None</em>, <em>database=None</em>, <em>logger=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycheron/plotting/dailyPdfPlot.html#dailyPdfplots"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycheron.plotting.dailyPdfPlot.dailyPdfplots" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a color grid of the daily PDF Mode differences from noise model (nlnm or gsn)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>st</strong> (<em>obspy.core.stream.Stream</em><em> or </em><a class="reference internal" href="pycheron.db.sqllite_db.html#pycheron.db.sqllite_db.Database" title="pycheron.db.sqllite_db.Database"><em>pycheron.db.sqllite_db.Database</em></a>) – Obspy stream object or Database Object</li>
<li><strong>model</strong> (<em>str</em>) – Noise Model to use in differencing from the PDF mode. Options are “gsn”, “nlnm”, or “network”.
Using “network” calls networkNoiseModel.py and creates one on the fly or uses input dictionary
from the output of a pre-existing network noise model.</li>
<li><strong>f_name_grid</strong> (<em>str</em>) – output file name for png colorgrid plot</li>
<li><strong>f_name_line</strong> (<em>str</em>) – output file name for png pdf mode timeline plots</li>
<li><strong>per_arr</strong> (<em>numpy.ndarray</em>) – Period array to use with the models</li>
<li><strong>net_dict</strong> (<em>dict</em>) – Network noise model formatted in same way as output from networkNoiseModel.py</li>
<li><strong>diff_threshold</strong> (<em>int</em>) – threshold to use to trigger frequency masks.</li>
<li><strong>micro_threshold</strong> (<em>int</em>) – Threshold to use to trigger masks when microseism isn’t recording healthy energy.</li>
<li><strong>banded_threshold</strong> (<em>int</em>) – threshold to use to trigger masks when banded character in colorgrid present.</li>
<li><strong>network</strong> (<em>str</em>) – If using database, must supply the network</li>
<li><strong>station</strong> (<em>str</em>) – If using database, must supply the station</li>
<li><strong>channel</strong> (<em>str</em>) – If using database, and want to plot specific channels, if None, all channels
associated with network, station, and session will be plotted</li>
<li><strong>session</strong> (<em>str</em>) – specific session in database</li>
<li><strong>database</strong> (<a class="reference internal" href="pycheron.db.sqllite_db.html#pycheron.db.sqllite_db.Database" title="pycheron.db.sqllite_db.Database"><em>pycheron.db.sqllite_db.Database</em></a>) – Database object to insert result. If :param st is a Database object, this is not needed.
However if it is a Obspy Stream and you would like to save to the DB or read existing data
set this parameter to a database object (Default = None)</li>
<li><strong>logger</strong> (<a class="reference internal" href="pycheron.util.logger.html#pycheron.util.logger.Logger" title="pycheron.util.logger.Logger"><em>pycheron.util.logger.Logger</em></a>) – Logger object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>list of dictionaries with the following keys and types:</p>
<ul class="simple">
<li>start_time (<cite>str</cite>): start time of the trace object. Applies to all masks noted below.</li>
<li>end_time (<cite>str</cite>): end time of the trace object. Applies to all masks noted below.</li>
<li>snclq (<cite>str</cite>): station network channel location quality indicator for the obspy object (e.g., UU.MSU..EHZ)</li>
<li>noise_masks (dictionary): dictionary containing the following information:<ul>
<li>frequency_start (<cite>list</cite>): list of beginning frequency value band where issue(s) start</li>
<li>frequency_end (<cite>list</cite>): list of ending frequency value band where issue(s) end</li>
</ul>
</li>
<li>microseism_masks (<cite>boolean</cite>): boolean indicating whether the microseism had healthy energy or not</li>
<li>banded_masks (<cite>boolean</cite>): boolean indicated whether banded issue was present, True indicates likely unhealthy
station</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Parameter Notes</strong></p>
<ul class="simple">
<li><dl class="first docutils">
<dt>diff_threshold (<cite>int</cite>):</dt>
<dd><ul class="first last">
<li>Threshold to use to trigger frequency masks. This is the difference from the nlnm,
gsn, or network noise models desired to trigger a mask. DEFAULT = 50 and is probably
sufficient for most cases as this will be the red color and above within the color
grid plots. This is used as a greater than or equal to threshold.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>micro_threshold (<cite>int</cite>):</dt>
<dd><ul class="first last">
<li>Threshold to use to trigger masks when microseism isn’t recording healthy energy.
This threshold is based on difference from nlnm, gsn, or network noise models desired
to trigger a mask. DEFAULT = 10, so the two darkest blues on the colorgrid plots.
This will be utilized as a less than or equal to threshold.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>banded_threshold (<cite>int</cite>):</dt>
<dd><ul class="first last">
<li>threshold to use to trigger masks when banded character in colorgrid present. This
often indicates an issue with the station, often unhealthy behavior, whether a dead
channel, noise issues, or other equipment issues. This trigger is to let the user
know there’s an issue with the health of the station. This threshold is based on
the average difference across each element in the array (or rows of the dataFrame)
Lower numbers indicate there isn’t much difference between the elements, which
suggests an unhealthy station, while larger numbers suggest a healthier change
as would be expected in a properly functioning station. DEFAULT = 5, and is probably
a good threshold for the majority of cases.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import libs</span>
<span class="kn">from</span> <span class="nn">obspy.clients.fdsn</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">pycheron.plotting.dailyPdfPlot</span> <span class="kn">import</span> <span class="n">dailyPdfplots</span>
<span class="kn">from</span> <span class="nn">obspy</span> <span class="kn">import</span> <span class="n">UTCDateTime</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="s2">&quot;IRIS&quot;</span><span class="p">)</span>

<span class="c1"># Define start/end time and then get stream object</span>
<span class="n">starttime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="s2">&quot;2012-12-12T00:00:00.000&quot;</span><span class="p">)</span>
<span class="n">endtime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="s2">&quot;2012-12-16T00:00:00.000&quot;</span><span class="p">)</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_waveforms</span><span class="p">(</span><span class="s2">&quot;AK&quot;</span><span class="p">,</span><span class="s2">&quot;GHO&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;BHE&quot;</span><span class="p">,</span><span class="n">starttime</span><span class="p">,</span> <span class="n">endtime</span><span class="p">)</span>
<span class="n">dailyPdfplots</span><span class="p">(</span><span class="n">st</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gsn&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/dailyPDFPlotGrid.png" src="_images/dailyPDFPlotGrid.png" />
<img alt="_images/dailyPDFPlotLine.png" src="_images/dailyPDFPlotLine.png" />
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Jessica Bobeck, Katherine Anderson Aur.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.<br/>
    </p>
  </div>
</footer>
  </body>
</html>