<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pycheron.metrics.correlationMetric &#8212; Pycheron 2.1.0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/horse-128.png"></span>
          Pycheron</a>
        <span class="navbar-text navbar-version pull-left"><b>2.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="install.html">Install</a></li>
                <li><a href="pycheron.html">Documentation</a></li>
                <li><a href="https://gitlab.sandia.gov/lynm/pycheron">Gitlab</a></li>
                <li><a href="tutorials">Tutorials</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Documentation <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">pycheron.metrics.correlationMetric</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="module-pycheron.metrics.correlationMetric">
<span id="pycheron-metrics-correlationmetric"></span><h1>pycheron.metrics.correlationMetric<a class="headerlink" href="#module-pycheron.metrics.correlationMetric" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="pycheron.metrics.correlationMetric.correlationMetric">
<code class="descname">correlationMetric</code><span class="sig-paren">(</span><em>tr1</em>, <em>tr2</em>, <em>logger=None</em>, <em>database=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pycheron/metrics/correlationMetric.html#correlationMetric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pycheron.metrics.correlationMetric.correlationMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the correlation between two traces of seismic data from same location.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>tr1</strong> (<cite>obspy.core.trace.Trace</cite>) – obspy trace object 1</li>
<li><strong>tr2</strong> (<cite>obspy.core.trace.Trace</cite>) – obspy trace object 2</li>
<li><strong>logger</strong> (<a class="reference internal" href="pycheron.util.logger.html#pycheron.util.logger.Logger" title="pycheron.util.logger.Logger"><em>pycheron.util.logger.Logger</em></a>) – If using a logger, (you must create one using the util.logger class)</li>
<li><strong>database</strong> (<a class="reference internal" href="pycheron.db.sqllite_db.html#pycheron.db.sqllite_db.Database" title="pycheron.db.sqllite_db.Database"><em>pycheron.db.sqllite_db.Database</em></a>) – database object</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>Dictionary containing the following keys and types:</p>
<ul class="simple">
<li>snclq (<cite>str</cite>)</li>
<li>start_time (<cite>str</cite>)</li>
<li>end_time (<cite>str</cite>)</li>
<li>correlation_coefficient (<cite>float</cite>)</li>
<li>p_value (<cite>float</cite>)</li>
<li>metric_name (<cite>str</cite>)</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
<p>The correlation returned is a value in the range [+/-1]. This ‘pearson r’ correlation is a measure of the strength
and direction of the linear relationship between two variables that is defined as the (sample) covariance of the
variables divided by the product of their (sample) standard deviations. Pearson’s correlation requires that each
dataset be normally distributed. Values may vary between -1 and +1 with 0 implying no correlation. Correlations of
-1 or +1 imply an exact linear relationship. Positive correlations imply that as x increases, so does y. Negative
correlations imply that as x increases, y decreases.</p>
<p>The p-value roughly indicates the probability of an uncorrelated system producing datasets that have a Pearson
correlation at least as extreme as the one computed from these datasets. The null hypothesis is that the two
variables are uncorrelated. The p-value is a number between zero and one that represents the probability that your
data would have arisen if the null hypothesis were true.The p-values are not entirely reliable but are probably
reasonable for datasets larger than 500 or so (majority of above statements taken from scipy manpage)</p>
<p>Seismic traces passed to <cite>correlationMetric</cite> must have the same network and station, must cover the same time range
and must have the same sampling rate</p>
<p><strong>Examples</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialize client object</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="s2">&quot;IRIS&quot;</span><span class="p">)</span>
<span class="c1"># Get a days worth of data from 03/01/2013-03/02/2013 and pull out individual traces for comparison</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="s2">&quot;2013-03-01T00:00:00.000&quot;</span><span class="p">)</span>
<span class="n">stANMO</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_waveforms</span><span class="p">(</span><span class="s2">&quot;IU&quot;</span><span class="p">,</span><span class="s2">&quot;ANMO&quot;</span><span class="p">,</span> <span class="s2">&quot;00&quot;</span><span class="p">,</span><span class="s2">&quot;BH*&quot;</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">t</span><span class="o">+</span><span class="mi">1440</span><span class="o">*</span><span class="mi">60</span><span class="p">)</span>
<span class="n">tr1</span> <span class="o">=</span> <span class="n">stANMO</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">tr2</span> <span class="o">=</span> <span class="n">stANMO</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="c1"># Compare traces; BH1:BH2</span>
<span class="n">corr12</span> <span class="o">=</span> <span class="n">correlationMetric</span><span class="p">(</span><span class="n">tr1</span><span class="p">,</span><span class="n">tr2</span><span class="p">)</span>
<span class="k">print</span> <span class="n">corr12</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s1">&#39;p-value&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s1">&#39;metric_name&#39;</span><span class="p">:</span> <span class="s1">&#39;correclationMetric&#39;</span><span class="p">,</span> <span class="s1">&#39;start_time&#39;</span><span class="p">:</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">19500</span><span class="p">),</span> <span class="s1">&#39;correlation_coefficient&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.2041723553359387</span><span class="p">,</span> <span class="s1">&#39;snclq&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;IU.ANMO.00.BH1.M:IU.ANMO.00.BH2.M&#39;</span><span class="p">,</span> <span class="s1">&#39;end_time&#39;</span><span class="p">:</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">969500</span><span class="p">)}</span>
</pre></div>
</div>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Jessica Bobeck, Katherine Anderson Aur.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.9.<br/>
    </p>
  </div>
</footer>
  </body>
</html>